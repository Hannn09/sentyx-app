{% extends "layout/index.html" %}

{% block title %}Sentyx - Dashboard{% endblock %}

{% block header %}Dashboard{% endblock %}

{% block content %}
 
 <!-- Card -->
 <div class="flex md:flex-row flex-col mt-12 gap-3">
    <!-- Card 1 -->
    <div
        class="bg-[#2563EB] text-white rounded-xl px-4 py-6 flex items-center justify-between w-full md:w-1/2 lg:w-1/4 shadow-md">
        <div class="flex space-x-3 items-center">
            <div class="text-3xl font-bold leading-none">{{ trainingCount }}</div>
            <div class="flex flex-col">
                <div class="text-sm font-medium">Total</div>
                <div class="text-sm font-medium ">Data Training</div>
            </div>
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                <path fill="#fff"
                    d="m10.45 12.975l1.3 1.3q.275.275.7.275t.7-.275l2.85-2.85v.6q0 .425.288.7T17 13t.713-.287T18 12V9q0-.425-.288-.712T17 8h-3.025q-.425 0-.7.288T13 9t.288.713T14 10h.575l-2.125 2.15l-1.3-1.3q-.275-.3-.7-.3t-.7.3L6.7 13.9q-.3.275-.3.7t.3.7q.275.3.7.3t.7-.3zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21z" />
            </svg>
        </div>
    </div>
    <!-- Card 2 -->
    <div
        class="bg-[#2563EB] text-white rounded-xl px-4 py-6 flex items-center justify-between  w-full md:w-1/2 lg:w-1/4 shadow-md">
        <div class="flex space-x-3 items-center">
            <div class="text-3xl font-bold leading-none">{{ testingCount }}</div>
            <div class="flex flex-col">
                <div class="text-sm font-medium">Total</div>
                <div class="text-sm font-medium ">Data Testing</div>
            </div>
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                <path fill="#fff"
                    d="m10.45 12.975l1.3 1.3q.275.275.7.275t.7-.275l2.85-2.85v.6q0 .425.288.7T17 13t.713-.287T18 12V9q0-.425-.288-.712T17 8h-3.025q-.425 0-.7.288T13 9t.288.713T14 10h.575l-2.125 2.15l-1.3-1.3q-.275-.3-.7-.3t-.7.3L6.7 13.9q-.3.275-.3.7t.3.7q.275.3.7.3t.7-.3zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21z" />
            </svg>
        </div>
    </div>
    <!-- Card 3 -->
    <div
        class="bg-[#2563EB] text-white rounded-xl px-4 py-6 flex items-center justify-between  w-full md:w-1/2 lg:w-1/4 shadow-md">
        <div class="flex space-x-3 items-center">
            <div class="text-3xl font-bold leading-none">{{ positifCount }}</div>
            <div class="flex flex-col">
                <div class="text-sm font-medium">Total</div>
                <div class="text-sm font-medium ">Sentiment Positive</div>
            </div>
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                <path fill="#fff"
                    d="m10.45 12.975l1.3 1.3q.275.275.7.275t.7-.275l2.85-2.85v.6q0 .425.288.7T17 13t.713-.287T18 12V9q0-.425-.288-.712T17 8h-3.025q-.425 0-.7.288T13 9t.288.713T14 10h.575l-2.125 2.15l-1.3-1.3q-.275-.3-.7-.3t-.7.3L6.7 13.9q-.3.275-.3.7t.3.7q.275.3.7.3t.7-.3zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21z" />
            </svg>
        </div>
    </div>
    <!-- Card 4 -->
    <div
        class="bg-[#2563EB] text-white rounded-xl px-4 py-6 flex items-center justify-between  w-full md:w-1/2 lg:w-1/4 shadow-md">
        <div class="flex space-x-3 items-center">
            <div class="text-3xl font-bold leading-none">{{ mixedCount }}</div>
            <div class="flex flex-col">
                <div class="text-sm font-medium">Total</div>
                <div class="text-sm font-medium ">Negative + Netral</div>
            </div>
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                <path fill="#fff"
                    d="m10.45 12.975l1.3 1.3q.275.275.7.275t.7-.275l2.85-2.85v.6q0 .425.288.7T17 13t.713-.287T18 12V9q0-.425-.288-.712T17 8h-3.025q-.425 0-.7.288T13 9t.288.713T14 10h.575l-2.125 2.15l-1.3-1.3q-.275-.3-.7-.3t-.7.3L6.7 13.9q-.3.275-.3.7t.3.7q.275.3.7.3t.7-.3zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21z" />
            </svg>
        </div>
    </div>
</div>

<!-- Chart -->
<div class="flex md:flex-row flex-col gap-3 my-5">
    <!-- Chart 1 -->
    <div class="w-full md:w-1/2 bg-white rounded-xl shadow-md p-2 md:p-6">
        <div class="flex justify-between items-start w-full">
            <div class="flex-col items-center">
                <div class="flex items-center mb-1">
                    <h5 class="text-xl font-bold tracking-tighter text-[#1F2937] me-1">Percentage of Sentiment Results</h5>
                </div>
            </div>
        </div>
        <div id="sentiment-data"
            data-positif="{{ positifPercent }}"
            data-negatif="{{ negatifPercent }}"
            data-netral="{{ netralPercent }}"></div>
        <div class="py-4" id="pie-chart"></div>
    </div>

    <!-- Chart 2 -->
    <div class="w-full md:w-1/2 bg-white rounded-xl shadow-md p-2 md:p-6">
        <div class="flex justify-between items-start w-full">
            <div class="flex-col items-center">
                <div class="flex items-center mb-1">
                    <h5 class="text-xl font-bold tracking-tighter text-[#1F2937] me-1">Sentiment Trends</h5>
                </div>
            </div>
        </div>
        <div id="line-chart-data"
            data-years='{{ years | tojson }}'
            data-positif='{{ positifCountsYear | tojson }}'
            data-negatif='{{ negatifCountsYear | tojson }}'
            data-netral='{{ netralCountsYear | tojson }}'>
        </div>
        <div id="labels-chart" class="px-2.5"></div>
    </div>
</div>

<!-- Table -->
<div class="relative overflow-x-auto shadow-md rounded-xl">
    <table class="w-full text-sm text-left rtl:text-right text-gray-500 ">
        <caption class="p-5 text-lg font-bold text-left rtl:text-right text-gray-900 bg-white ">
            Top Words
        </caption>
        <thead class="text-xs text-gray-700 bg-gray-50 ">
            <tr>
                <th scope="col" class="px-6 py-3">
                    #
                </th>
                <th scope="col" class="px-6 py-3">
                    Words
                </th>
                <th scope="col" class="px-6 py-3">
                    Popularity
                </th>
                <th scope="col" class="px-6 py-3">
                    Percentage
                </th>
                
            </tr>
        </thead>
        <tbody>
            {% if topWords|length == 0 %}
            <tr>
                <td colspan="4" class="text-center py-6 text-gray-400 text-md font-medium">
                    There's no data.
                </td>
            </tr>
            {% else %}
            {% for word, score in topWords %}
            <tr class="bg-white ">
                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                    {{ loop.index }}
                </th>
                <td class="px-6 py-4">
                    {{ word }}
                </td>
                <td class="px-6 py-4">
                    <div class="w-full bg-gray-200 rounded-full h-2.5 ">
                        <div class="bg-blue-600 h-2.5 rounded-full" style="width:  {{ (score * 100) | round(2) }}%"></div>
                      </div>
                    <!-- {{ score }} -->
                </td>
                <td class="px-6 py-4">
                    <div class=" max-w-5 border border-[#0095FF] rounded-lg bg-[#F0F9FF] text-[#0095FF] text-center px-3 py-1 font-semibold">
                        {{ (score * 100) | round(2) }}%
                    </div>
                </td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}